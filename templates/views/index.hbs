<html>

<head>
    <title>Weather</title>
    <link rel="icon" href="/webserver/public/img/weather.png">
    
    
    <style>
        body {
            color: #333333;
            font-family: arial;
            max-width: 650px;
            margin: 0 auto;
            padding: 0 16px;

            display: flex;
            flex-direction: column;
            min-height: 100vh
        }

        .main-content {
            flex-grow: 1;
        }

        footer {
            color: #888888;
            border-top: 1px solid #eeeeee;
            margin-top: 16px;
            padding: 16px 0;
        }

        header {
            margin-top: 16px;
            margin-bottom: 48px;
        }

        h1 {
            font-size: 64px;
            margin-bottom: 16px;
        }

        header a {
            color: #888888;
            margin-right: 16px;
            text-decoration: none;
        }

        .portrait {
            width: 250px;
        }

        input {
            border: 1px solid #cccccc;
            padding: 8px;
        }

        button {
            cursor: pointer;
            border: 1px solid #888888;
            background: #888888;
            color: white;
            padding: 8px;
        }
        @media only screen and (max-width: 600px) {
            body {
                background-color: rgb(62, 113, 113);
            }
            body {
            color: #333333;
            font-family: arial;
            max-width: 650px;
            margin: 0 auto;
            padding: 0 16px;

            display: flex;
            flex-direction: column;
            min-height: 100vh
        }

        .main-content {
            flex-grow: 1;
        }

        footer {
            color: #888888;
            border-top: 1px solid #eeeeee;
            margin-top: 16px;
            padding: 16px 0;
        }

        header {
            margin-top: 16px;
            margin-bottom: 48px;
        }

        h1 {
            font-size: 64px;
            margin-bottom: 16px;
        }

        header a {
            color: #888888;
            margin-right: 16px;
            text-decoration: none;
        }

        .portrait {
            width: 250px;
        }

        input {
            border: 1px solid #cccccc;
            padding: 8px;
        }

        button {
            cursor: pointer;
            border: 1px solid #888888;
            background: #888888;
            color: white;
            padding: 8px;
        }
        }
    </style>
</head>

<body>
    <div class="main-content">
        {{>header}}

        <p>Use this site to get your weather!</p>

        <form action="">
            <input type="text" placeholder="enter location">
            <button>
                Search
            </button>
        </form>

        <p id="message-1"></p>
        <p id="message-2"></p>

    </div>


    {{>footer}}

    <script src="/webserver/public/js/app.js"></script>

    <script>
        console.log('Client side javascript file is loaded!')

        const weatherForm = document.querySelector('form')
        const search = document.querySelector('input')
        const messageOne = document.querySelector('#message-1')
        const messageTwo = document.querySelector('#message-2')

        weatherForm.addEventListener('submit', (e) => {
            e.preventDefault()

            const location = search.value

            messageOne.textContent = 'Loading...'
            messageTwo.textContent = ''

            fetch('/weather?address=' + location).then((response) => {
                response.json().then((data) => {
                    if (data.error) {
                        messageOne.textContent = data.error
                    } else {
                        messageOne.textContent = data.location
                        messageTwo.textContent = data.temprature
                    }
                })
            })
        })
    </script>
</body>

</html>